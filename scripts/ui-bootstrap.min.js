/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.10.0 - 2014-01-14
 * License: MIT
 */
angular.module("ui.bootstrap", ["ui.bootstrap.position", "ui.bootstrap.datepicker"]),
angular.module("ui.bootstrap.position", []).factory("$position", ["$document", "$window", function (a, b) { function c(a, c) { return a.currentStyle ? a.currentStyle[c] : b.getComputedStyle ? b.getComputedStyle(a)[c] : a.style[c] } function d(a) { return "static" === (c(a, "position") || "static") } var e = function (b) { for (var c = a[0], e = b.offsetParent || c; e && e !== c && d(e) ;) e = e.offsetParent; return e || c }; return { position: function (b) { var c = this.offset(b), d = { top: 0, left: 0 }, f = e(b[0]); f != a[0] && (d = this.offset(angular.element(f)), d.top += f.clientTop - f.scrollTop, d.left += f.clientLeft - f.scrollLeft); var g = b[0].getBoundingClientRect(); return { width: g.width || b.prop("offsetWidth"), height: g.height || b.prop("offsetHeight"), top: c.top - d.top, left: c.left - d.left } }, offset: function (c) { var d = c[0].getBoundingClientRect(); return { width: d.width || c.prop("offsetWidth"), height: d.height || c.prop("offsetHeight"), top: d.top + (b.pageYOffset || a[0].body.scrollTop || a[0].documentElement.scrollTop), left: d.left + (b.pageXOffset || a[0].body.scrollLeft || a[0].documentElement.scrollLeft) } } } }]), angular.module("ui.bootstrap.datepicker", ["ui.bootstrap.position"]).constant("datepickerConfig", { dayFormat: "dd", monthFormat: "MMMM", yearFormat: "yyyy", dayHeaderFormat: "EEE", dayTitleFormat: "MMMM yyyy", monthTitleFormat: "yyyy", showWeeks: !0, startingDay: 0, yearRange: 20, minDate: null, maxDate: null }).controller("DatepickerController", ["$scope", "$attrs", "dateFilter", "datepickerConfig", function (a, b, c, d) { function e(b, c) { return angular.isDefined(b) ? a.$parent.$eval(b) : c } function f(a, b) { return new Date(a, b, 0).getDate() } function g(a, b) { for (var c = new Array(b), d = a, e = 0; b > e;) c[e++] = new Date(d), d.setDate(d.getDate() + 1); return c } function h(a, b, d, e) { return { date: a, label: c(a, b), selected: !!d, secondary: !!e } } var i = { day: e(b.dayFormat, d.dayFormat), month: e(b.monthFormat, d.monthFormat), year: e(b.yearFormat, d.yearFormat), dayHeader: e(b.dayHeaderFormat, d.dayHeaderFormat), dayTitle: e(b.dayTitleFormat, d.dayTitleFormat), monthTitle: e(b.monthTitleFormat, d.monthTitleFormat) }, j = e(b.startingDay, d.startingDay), k = e(b.yearRange, d.yearRange); this.minDate = d.minDate ? new Date(d.minDate) : null, this.maxDate = d.maxDate ? new Date(d.maxDate) : null, this.modes = [{ name: "day", getVisibleDates: function (a, b) { var d = a.getFullYear(), e = a.getMonth(), k = new Date(d, e, 1), l = j - k.getDay(), m = l > 0 ? 7 - l : -l, n = new Date(k), o = 0; m > 0 && (n.setDate(-m + 1), o += m), o += f(d, e + 1), o += (7 - o % 7) % 7; for (var p = g(n, o), q = new Array(7), r = 0; o > r; r++) { var s = new Date(p[r]); p[r] = h(s, i.day, b && b.getDate() === s.getDate() && b.getMonth() === s.getMonth() && b.getFullYear() === s.getFullYear(), s.getMonth() !== e) } for (var t = 0; 7 > t; t++) q[t] = c(p[t].date, i.dayHeader); return { objects: p, title: c(a, i.dayTitle), labels: q } }, compare: function (a, b) { return new Date(a.getFullYear(), a.getMonth(), a.getDate()) - new Date(b.getFullYear(), b.getMonth(), b.getDate()) }, split: 7, step: { months: 1 } }, { name: "month", getVisibleDates: function (a, b) { for (var d = new Array(12), e = a.getFullYear(), f = 0; 12 > f; f++) { var g = new Date(e, f, 1); d[f] = h(g, i.month, b && b.getMonth() === f && b.getFullYear() === e) } return { objects: d, title: c(a, i.monthTitle) } }, compare: function (a, b) { return new Date(a.getFullYear(), a.getMonth()) - new Date(b.getFullYear(), b.getMonth()) }, split: 3, step: { years: 1 } }, { name: "year", getVisibleDates: function (a, b) { for (var c = new Array(k), d = a.getFullYear(), e = parseInt((d - 1) / k, 10) * k + 1, f = 0; k > f; f++) { var g = new Date(e + f, 0, 1); c[f] = h(g, i.year, b && b.getFullYear() === g.getFullYear()) } return { objects: c, title: [c[0].label, c[k - 1].label].join(" - ") } }, compare: function (a, b) { return a.getFullYear() - b.getFullYear() }, split: 5, step: { years: k } }], this.isDisabled = function (b, c) { var d = this.modes[c || 0]; return this.minDate && d.compare(b, this.minDate) < 0 || this.maxDate && d.compare(b, this.maxDate) > 0 || a.dateDisabled && a.dateDisabled({ date: b, mode: d.name }) } }]).directive("datepicker", ["dateFilter", "$parse", "datepickerConfig", "$log", function (a, b, c, d) { return { restrict: "EA", replace: !0, templateUrl: "/siteassets/ebcs/app/templates/datepicker/datepicker.html", scope: { dateDisabled: "&" }, require: ["datepicker", "?^ngModel"], controller: "DatepickerController", link: function (a, e, f, g) { function h() { a.showWeekNumbers = 0 === o && q } function i(a, b) { for (var c = []; a.length > 0;) c.push(a.splice(0, b)); return c } function j(b) { var c = null, e = !0; n.$modelValue && (c = new Date(n.$modelValue), isNaN(c) ? (e = !1, d.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')) : b && (p = c)), n.$setValidity("date", e); var f = m.modes[o], g = f.getVisibleDates(p, c); angular.forEach(g.objects, function (a) { a.disabled = m.isDisabled(a.date, o) }), n.$setValidity("date-disabled", !c || !m.isDisabled(c)), a.rows = i(g.objects, f.split), a.labels = g.labels || [], a.title = g.title } function k(a) { o = a, h(), j() } function l(a) { var b = new Date(a); b.setDate(b.getDate() + 4 - (b.getDay() || 7)); var c = b.getTime(); return b.setMonth(0), b.setDate(1), Math.floor(Math.round((c - b) / 864e5) / 7) + 1 } var m = g[0], n = g[1]; if (n) { var o = 0, p = new Date, q = c.showWeeks; f.showWeeks ? a.$parent.$watch(b(f.showWeeks), function (a) { q = !!a, h() }) : h(), f.min && a.$parent.$watch(b(f.min), function (a) { m.minDate = a ? new Date(a) : null, j() }), f.max && a.$parent.$watch(b(f.max), function (a) { m.maxDate = a ? new Date(a) : null, j() }), n.$render = function () { j(!0) }, a.select = function (a) { if (0 === o) { var b = n.$modelValue ? new Date(n.$modelValue) : new Date(0, 0, 0, 0, 0, 0, 0); b.setFullYear(a.getFullYear(), a.getMonth(), a.getDate()), n.$setViewValue(b), j(!0) } else p = a, k(o - 1) }, a.move = function (a) { var b = m.modes[o].step; p.setMonth(p.getMonth() + a * (b.months || 0)), p.setFullYear(p.getFullYear() + a * (b.years || 0)), j() }, a.toggleMode = function () { k((o + 1) % m.modes.length) }, a.getWeekNumber = function (b) { return 0 === o && a.showWeekNumbers && 7 === b.length ? l(b[0].date) : null } } } } }]).constant("datepickerPopupConfig", { dateFormat: "yyyy-MM-dd", currentText: "Today", toggleWeeksText: "Weeks", clearText: "Clear", closeText: "Done", closeOnDateSelection: !0, appendToBody: !1, showButtonBar: !0 }).directive("datepickerPopup", ["$compile", "$parse", "$document", "$position", "dateFilter", "datepickerPopupConfig", "datepickerConfig", function (a, b, c, d, e, f, g) { return { restrict: "EA", require: "ngModel", link: function (h, i, j, k) { function l(a) { u ? u(h, !!a) : q.isOpen = !!a } function m(a) { if (a) { if (angular.isDate(a)) return k.$setValidity("date", !0), a; if (angular.isString(a)) { var b = new Date(a); return isNaN(b) ? (k.$setValidity("date", !1), void 0) : (k.$setValidity("date", !0), b) } return k.$setValidity("date", !1), void 0 } return k.$setValidity("date", !0), null } function n(a, c, d) { a && (h.$watch(b(a), function (a) { q[c] = a }), y.attr(d || c, c)) } function o() { q.position = s ? d.offset(i) : d.position(i), q.position.top = q.position.top + i.prop("offsetHeight") } var p, q = h.$new(), r = angular.isDefined(j.closeOnDateSelection) ? h.$eval(j.closeOnDateSelection) : f.closeOnDateSelection, s = angular.isDefined(j.datepickerAppendToBody) ? h.$eval(j.datepickerAppendToBody) : f.appendToBody; j.$observe("datepickerPopup", function (a) { p = a || f.dateFormat, k.$render() }), q.showButtonBar = angular.isDefined(j.showButtonBar) ? h.$eval(j.showButtonBar) : f.showButtonBar, h.$on("$destroy", function () { C.remove(), q.$destroy() }), j.$observe("currentText", function (a) { q.currentText = angular.isDefined(a) ? a : f.currentText }), j.$observe("toggleWeeksText", function (a) { q.toggleWeeksText = angular.isDefined(a) ? a : f.toggleWeeksText }), j.$observe("clearText", function (a) { q.clearText = angular.isDefined(a) ? a : f.clearText }), j.$observe("closeText", function (a) { q.closeText = angular.isDefined(a) ? a : f.closeText }); var t, u; j.isOpen && (t = b(j.isOpen), u = t.assign, h.$watch(t, function (a) { q.isOpen = !!a })), q.isOpen = t ? t(h) : !1; var v = function (a) { q.isOpen && a.target !== i[0] && q.$apply(function () { l(!1) }) }, w = function () { q.$apply(function () { l(!0) }) }, x = angular.element("<div datepicker-popup-wrap><div datepicker></div></div>"); x.attr({ "ng-model": "date", "ng-change": "dateSelection()" }); var y = angular.element(x.children()[0]), z = {}; j.datepickerOptions && (z = h.$eval(j.datepickerOptions), y.attr(angular.extend({}, z))), k.$parsers.unshift(m), q.dateSelection = function (a) { angular.isDefined(a) && (q.date = a), k.$setViewValue(q.date), k.$render(), r && l(!1) }, i.bind("input change keyup", function () { q.$apply(function () { q.date = k.$modelValue }) }), k.$render = function () { var a = k.$viewValue ? e(k.$viewValue, p) : ""; i.val(a), q.date = k.$modelValue }, n(j.min, "min"), n(j.max, "max"), j.showWeeks ? n(j.showWeeks, "showWeeks", "show-weeks") : (q.showWeeks = "show-weeks" in z ? z["show-weeks"] : g.showWeeks, y.attr("show-weeks", "showWeeks")), j.dateDisabled && y.attr("date-disabled", j.dateDisabled); var A = !1, B = !1; q.$watch("isOpen", function (a) { a ? (o(), c.bind("click", v), B && i.unbind("focus", w), i[0].focus(), A = !0) : (A && c.unbind("click", v), i.bind("focus", w), B = !0), u && u(h, a) }), q.today = function () { q.dateSelection(new Date) }, q.clear = function () { q.dateSelection(null) }; var C = a(x)(q); s ? c.find("body").append(C) : i.after(C) } } }]).directive("datepickerPopupWrap", function () { return { restrict: "EA", replace: !0, transclude: !0, templateUrl: "/siteassets/ebcs/app/templates/datepicker/popup.html", link: function (a, b) { b.bind("click", function (a) { a.preventDefault(), a.stopPropagation() }) } } });